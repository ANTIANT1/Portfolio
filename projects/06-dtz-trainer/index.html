<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DTZ Profi-Trainer B1 (Full v3)</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
        .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }
        .animate-slide-in { animation: slideIn 0.3s ease-out forwards; }
        .perspective { perspective: 1000px; }
        .rotate-y-180 { transform: rotateY(180deg); }
        .backface-hidden { backface-visibility: hidden; }
        .preserve-3d { transform-style: preserve-3d; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;
        
        // --- –ò–ö–û–ù–ö–ò ---
        const Icons = {
            Home: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>,
            Check: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="20 6 9 17 4 12"/></svg>,
            X: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,
            Book: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>,
            Brain: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></svg>,
            Read: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>,
            Trophy: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>,
            Alert: ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>
        };

        // ================= –î–ê–ù–ù–´–ï 100 –í–û–ü–†–û–°–û–í =================
        
        const quizData = {
          block1: {
            title: "1. –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞: –õ–æ–≥–∏–∫–∞ (Weil, Ob...)",
            questions: [
              { id: 1, question: "Ich kann nicht kommen, weil ich krank ______.", options: ["bin", "ist", "sind", "war"], correct: 0, explanation: "Weil -> –ì–ª–∞–≥–æ–ª –≤ –∫–æ–Ω–µ—Ü." },
              { id: 2, question: "Ich bin krank, deshalb ______ zu Hause.", options: ["ich bleibe", "bleibe ich", "bleibe", "ich bin"], correct: 1, explanation: "Deshalb -> –ì–ª–∞–≥–æ–ª —Å—Ä–∞–∑—É (2-—è –ø–æ–∑–∏—Ü–∏—è)." },
              { id: 3, question: "Ich wei√ü nicht, ______ ich Zeit habe.", options: ["wenn", "ob", "dass", "weil"], correct: 1, explanation: "–ù–µ –∑–Ω–∞—é, –µ—Å—Ç—å –õ–ò —É –º–µ–Ω—è –≤—Ä–µ–º—è (Ob)." },
              { id: 4, question: "Ruf mich an, ______ du fertig bist.", options: ["ob", "wann", "wenn", "als"], correct: 2, explanation: "–£—Å–ª–æ–≤–∏–µ/–í—Ä–µ–º—è –≤ –±—É–¥—É—â–µ–º = Wenn." },
              { id: 5, question: "Er sagt, ______ er morgen kommt.", options: ["dass", "weil", "ob", "wenn"], correct: 0, explanation: "–ö–æ—Å–≤–µ–Ω–Ω–∞—è —Ä–µ—á—å (—á—Ç–æ...) = dass." },
              { id: 6, question: "Ich habe keine Zeit, ins Kino ______.", options: ["gehen", "zu gehen", "gehe", "zu gehe"], correct: 1, explanation: "Habe Zeit -> zu + Infinitiv." },
              { id: 7, question: "Ich m√∂chte Deutsch ______.", options: ["lernen", "zu lernen", "lerne", "gelernt"], correct: 0, explanation: "M√∂chte (–ú–æ–¥–∞–ª—å–Ω—ã–π) -> –±–µ–∑ zu." },
              { id: 8, question: "Es ist wichtig, viel Wasser ______.", options: ["trinken", "zu trinken", "trinkt", "getrunken"], correct: 1, explanation: "Es ist wichtig -> zu + Infinitiv." },
              { id: 9, question: "Obwohl es regnet, ______ ich spazieren.", options: ["gehe", "ich gehe", "gehe ich", "gehen"], correct: 2, explanation: "Obwohl -> –ì–ª–∞–≥–æ–ª –≤ –∫–æ–Ω—Ü–µ –ø—Ä–∏–¥–∞—Ç–æ—á–Ω–æ–≥–æ, –∑–∞—Ç–µ–º —Å—Ä–∞–∑—É –ì–ª–∞–≥–æ–ª –≥–ª–∞–≤–Ω–æ–≥–æ." },
              { id: 10, question: "Seit ich in Deutschland bin, ______ ich Deutsch.", options: ["lerne", "lernen", "ich lerne", "habe gelernt"], correct: 0, explanation: "Seit... (–∑–∞–ø—è—Ç–∞—è) -> –ì–ª–∞–≥–æ–ª." },
              { id: 11, question: "Ich lerne Deutsch, ______ ich Arbeit suche.", options: ["denn", "weil", "deshalb", "trotzdem"], correct: 1, explanation: "Weil = –ü—Ä–∏—á–∏–Ω–∞ (–≥–ª–∞–≥–æ–ª –≤ –∫–æ–Ω—Ü–µ)." },
              { id: 12, question: "Ich komme nicht, ______ ich habe keine Lust.", options: ["weil", "denn", "deshalb", "obwohl"], correct: 1, explanation: "Denn = –ü—Ä–∏—á–∏–Ω–∞ (–Ω–æ –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤ –ø—Ä—è–º–æ–π!)." },
              { id: 13, question: "Damit ich den Test bestehe, ______ ich viel.", options: ["lerne", "lernen", "ich lerne", "gelernt"], correct: 0, explanation: "Damit... -> –ì–ª–∞–≥–æ–ª." },
              { id: 14, question: "Hast du Lust, ______?", options: ["zu kommen", "kommen", "kommst", "gekommen"], correct: 0, explanation: "Lust haben -> zu + Infinitiv." },
              { id: 15, question: "Ich fange an, das Buch ______.", options: ["lesen", "zu lesen", "lese", "gelesen"], correct: 1, explanation: "Anfangen -> zu + Infinitiv." },
              { id: 16, question: "Ich verspreche dir, ______.", options: ["zu helfen", "helfen", "hilft", "geholfen"], correct: 0, explanation: "Versprechen -> zu + Infinitiv." },
              { id: 17, question: "K√∂nnen Sie mir sagen, wie sp√§t es ______?", options: ["ist", "sind", "war", "sein"], correct: 0, explanation: "–ö–æ—Å–≤–µ–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å -> –ì–ª–∞–≥–æ–ª –≤ –∫–æ–Ω–µ—Ü." },
              { id: 18, question: "Ich gehe einkaufen, ______ der K√ºhlschrank leer ist.", options: ["weil", "denn", "deshalb", "ob"], correct: 0, explanation: "–ü—Ä–∏—á–∏–Ω–∞." },
              { id: 19, question: "Er ist m√ºde, ______ geht er schlafen.", options: ["weil", "denn", "deshalb", "dass"], correct: 2, explanation: "–°–ª–µ–¥—Å—Ç–≤–∏–µ." },
              { id: 20, question: "Bitte sag mir, ______ du kommst.", options: ["wann", "als", "wenn", "damit"], correct: 0, explanation: "–í–æ–ø—Ä–æ—Å '–ö–æ–≥–¥–∞?' –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è." }
            ]
          },
          block2: {
            title: "2. –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞: –ì–ª–∞–≥–æ–ª—ã",
            questions: [
              { id: 21, question: "Ich ______ nach Berlin gefahren.", options: ["habe", "bin", "werde", "hatte"], correct: 1, explanation: "Perfekt –¥–≤–∏–∂–µ–Ω–∏—è = Sein." },
              { id: 22, question: "Wir ______ Pizza gegessen.", options: ["sind", "haben", "werden", "hatten"], correct: 1, explanation: "Perfekt –æ–±—ã—á–Ω—ã–π = Haben." },
              { id: 23, question: "Er ______ fr√ºh aufgestanden.", options: ["ist", "hat", "wird", "war"], correct: 0, explanation: "–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è = Sein." },
              { id: 24, question: "Was hast du ______?", options: ["gemacht", "machen", "gemachen", "machte"], correct: 0, explanation: "Partizip II." },
              { id: 25, question: "Ich habe das Buch ______.", options: ["gelesen", "gelest", "lesen", "lese"], correct: 0, explanation: "–°–∏–ª—å–Ω—ã–π –≥–ª–∞–≥–æ–ª lesen -> gelesen." },
              { id: 26, question: "Hier ______ man nicht rauchen.", options: ["darf", "kann", "muss", "will"], correct: 0, explanation: "–ó–∞–ø—Ä–µ—Ç = D√ºrfen." },
              { id: 27, question: "Ich bin krank, ich ______ zum Arzt gehen.", options: ["darf", "kann", "muss", "will"], correct: 2, explanation: "–ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å = M√ºssen." },
              { id: 28, question: "______ du mir bitte helfen?", options: ["Kannst", "Musst", "Darfst", "Sollst"], correct: 0, explanation: "–ü—Ä–æ—Å—å–±–∞ = K√∂nnen." },
              { id: 29, question: "Der Arzt sagt, ich ______ Tabletten nehmen.", options: ["soll", "darf", "kann", "will"], correct: 0, explanation: "–ü–æ—Ä—É—á–µ–Ω–∏–µ (–≤—Ä–∞—á —Å–∫–∞–∑–∞–ª) = Sollen." },
              { id: 30, question: "Frau M√ºller, bitte ______ Sie mir.", options: ["helfen", "helft", "hilf", "hilft"], correct: 0, explanation: "Imperativ Sie -> Helfen Sie." },
              { id: 31, question: "Thomas, ______ das Fenster zu!", options: ["machen", "mach", "macht", "machen Sie"], correct: 1, explanation: "Imperativ Du -> Mach." },
              { id: 32, question: "Kinder, ______ bitte leise!", options: ["seid", "sein", "sind", "bist"], correct: 0, explanation: "Imperativ Ihr -> Seid." },
              { id: 33, question: "Ich ______ mich auf den Urlaub.", options: ["freue", "warte", "interessiere", "lust"], correct: 0, explanation: "Sich freuen (Reflexiv)." },
              { id: 34, question: "Wann ______ der Zug an?", options: ["kommt", "geht", "f√§hrt", "steht"], correct: 0, explanation: "Ankommen (–ø—Ä–∏–±—ã–≤–∞—Ç—å)." },
              { id: 35, question: "Ich ______ dich sp√§ter an.", options: ["rufe", "telefonieren", "spreche", "sage"], correct: 0, explanation: "Anrufen (–∑–≤–æ–Ω–∏—Ç—å)." },
              { id: 36, question: "Ich ______ gerne Tee.", options: ["trinke", "esse", "nehme", "habe"], correct: 0, explanation: "Trinken." },
              { id: 37, question: "Gestern ______ ich im Kino.", options: ["war", "bin", "habe", "wurde"], correct: 0, explanation: "Pr√§teritum Sein -> War." },
              { id: 38, question: "Fr√ºher ______ ich viel Sport gemacht.", options: ["habe", "bin", "hatte", "war"], correct: 0, explanation: "Perfekt machen -> Habe gemacht." },
              { id: 39, question: "Wir ______ am Wochenende grillen.", options: ["wollen", "sollen", "m√ºssen", "d√ºrfen"], correct: 0, explanation: "–ñ–µ–ª–∞–Ω–∏–µ/–ü–ª–∞–Ω = Wollen." },
              { id: 40, question: "Es ______ gleich regnen.", options: ["wird", "ist", "hat", "wurde"], correct: 0, explanation: "Futur (–±—É–¥–µ—Ç) -> Wird." }
            ]
          },
          block3: {
            title: "3. –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞: –ü–∞–¥–µ–∂–∏",
            questions: [
              { id: 41, question: "Ich fahre mit ______ Zug (m).", options: ["den", "dem", "der", "des"], correct: 1, explanation: "Mit + Dativ. –ú—É–∂—Å–∫–æ–π -> dem." },
              { id: 42, question: "Das ist f√ºr ______ Vater (m).", options: ["mein", "meinen", "meinem", "meines"], correct: 1, explanation: "F√ºr + Akkusativ. –ú—É–∂—Å–∫–æ–π -> meinen." },
              { id: 43, question: "Ich brauche ______ Termin (m).", options: ["einen", "ein", "einem", "einer"], correct: 0, explanation: "Akkusativ -> einen." },
              { id: 44, question: "Das Buch liegt auf ______ Tisch (m).", options: ["dem", "den", "der", "die"], correct: 0, explanation: "–ì–¥–µ? (Dativ) -> dem." },
              { id: 45, question: "Ich lege das Buch auf ______ Tisch (m).", options: ["den", "dem", "der", "die"], correct: 0, explanation: "–ö—É–¥–∞? (Akk) -> den." },
              { id: 46, question: "Ich helfe ______ Frau (f).", options: ["der", "die", "den", "dem"], correct: 0, explanation: "Helfen + Dativ. –ñ–µ–Ω—Å–∫–∏–π -> der." },
              { id: 47, question: "Ich gratuliere ______ Mann (m).", options: ["dem", "den", "der", "des"], correct: 0, explanation: "Gratulieren + Dativ." },
              { id: 48, question: "Ich sehe ______ Kind (n).", options: ["das", "dem", "den", "des"], correct: 0, explanation: "Sehen + Akkusativ. –°—Ä–µ–¥–Ω–∏–π -> das." },
              { id: 49, question: "Ich gehe zu ______ Arzt (m).", options: ["dem", "den", "der", "die"], correct: 0, explanation: "Zu + Dativ (zum)." },
              { id: 50, question: "Wir wohnen bei ______ Eltern (Pl).", options: ["meinen", "meine", "meiner", "meinem"], correct: 0, explanation: "Bei + Dativ Plural -> meinen." },
              { id: 51, question: "Ohne ______ Brille sehe ich nichts.", options: ["meine", "meiner", "meinen", "mein"], correct: 0, explanation: "Ohne + Akkusativ." },
              { id: 52, question: "Seit ______ Jahr (n) lerne ich Deutsch.", options: ["einem", "ein", "einen", "eines"], correct: 0, explanation: "Seit + Dativ." },
              { id: 53, question: "Ich schenke ______ Freundin (f) Blumen.", options: ["meiner", "meine", "meinen", "mein"], correct: 0, explanation: "–ö–æ–º—É? (Dativ)." },
              { id: 54, question: "Das Auto geh√∂rt ______ Chef (m).", options: ["dem", "den", "der", "des"], correct: 0, explanation: "Geh√∂ren (–ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å) + Dativ." },
              { id: 55, question: "Ich warte auf ______ Bus (m).", options: ["den", "dem", "der", "des"], correct: 0, explanation: "Warten auf + Akk." },
              { id: 56, question: "Wir sprechen mit ______ Lehrer (m).", options: ["dem", "den", "der", "die"], correct: 0, explanation: "Mit + Dativ." },
              { id: 57, question: "Gegen√ºber ______ Post (f) ist die Bank.", options: ["der", "die", "dem", "den"], correct: 0, explanation: "Gegen√ºber + Dativ." },
              { id: 58, question: "Durch ______ Park (m) gehen.", options: ["den", "dem", "der", "die"], correct: 0, explanation: "Durch + Akkusativ." },
              { id: 59, question: "Um 8 ______ treffe ich dich.", options: ["Uhr", "Stunde", "Zeit", "Mal"], correct: 0, explanation: "Um ... Uhr." },
              { id: 60, question: "Am ______ arbeite ich nicht.", options: ["Montag", "Januar", "2023", "Abend"], correct: 0, explanation: "Am + –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏." }
            ]
          },
          block4: {
            title: "4. –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞: –ü—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ",
            questions: [
              { id: 61, question: "Der ______ Mann (m) ist hier.", options: ["gute", "guter", "guten", "gutes"], correct: 0, explanation: "Nom, der -> -e." },
              { id: 62, question: "Ich sehe den ______ Mann (m).", options: ["guten", "guter", "gute", "gutes"], correct: 0, explanation: "Akk, den -> -en." },
              { id: 63, question: "Ich helfe der ______ Frau (f).", options: ["alten", "alte", "alter", "altem"], correct: 0, explanation: "Dat, der -> -en." },
              { id: 64, question: "Das ist ein ______ Auto (n).", options: ["sch√∂nes", "sch√∂ne", "sch√∂ner", "sch√∂nen"], correct: 0, explanation: "Nom, ein -> -es." },
              { id: 65, question: "Ich trinke ______ Kaffee (m).", options: ["schwarzen", "schwarzer", "schwarze", "schwarzes"], correct: 0, explanation: "Akk, –±–µ–∑ –∞—Ä—Ç–∏–∫–ª—è -> -en." },
              { id: 66, question: "Mit ______ Gr√º√üen (Pl).", options: ["freundlichen", "freundliche", "freundlicher", "freundliches"], correct: 0, explanation: "Dat Pl -> -en." },
              { id: 67, question: "Lieb______ Anna (f),", options: ["-e", "-er", "-en", "-es"], correct: 0, explanation: "Liebe Anna." },
              { id: 68, question: "Lieb______ Thomas (m),", options: ["-er", "-e", "-en", "-es"], correct: 0, explanation: "Lieber Thomas." },
              { id: 69, question: "Ein ______ Kind (n) spielt.", options: ["kleines", "kleine", "kleiner", "kleinen"], correct: 0, explanation: "Nom, ein -> -es." },
              { id: 70, question: "Ich habe eine ______ Tasche (f).", options: ["neue", "neues", "neuer", "neuen"], correct: 0, explanation: "Akk, eine -> -e." },
              { id: 71, question: "Gute ______ (f)!", options: ["Besserung", "Nacht", "Tag", "Morgen"], correct: 0, explanation: "–ñ–µ–Ω—Å–∫–∏–π —Ä–æ–¥." },
              { id: 72, question: "Mein Auto ist ______ als deins.", options: ["schneller", "schnell", "am schnellsten", "schnelle"], correct: 0, explanation: "–°—Ä–∞–≤–Ω–µ–Ω–∏–µ -> -er." },
              { id: 73, question: "Er ist der ______ L√§ufer.", options: ["schnellste", "schneller", "schnell", "am schnellsten"], correct: 0, explanation: "Superlativ -> -ste." },
              { id: 74, question: "Ich trinke ______ Tee als Kaffee.", options: ["lieber", "gern", "besser", "gut"], correct: 0, explanation: "Gern -> Lieber." },
              { id: 75, question: "Am ______ mag ich Pizza.", options: ["besten", "gut", "besser", "lieber"], correct: 0, explanation: "Am besten." },
              { id: 76, question: "Welch______ Tag (m) ist heute?", options: ["-er", "-e", "-en", "-es"], correct: 0, explanation: "Welcher." },
              { id: 77, question: "Dies______ Buch (n) ist gut.", options: ["-es", "-e", "-er", "-en"], correct: 0, explanation: "Dieses." },
              { id: 78, question: "Ich w√ºnsche ein ______ Wochenende (n).", options: ["sch√∂nes", "sch√∂ne", "sch√∂ner", "sch√∂nen"], correct: 0, explanation: "Akk, ein -> -es." },
              { id: 79, question: "Bei ______ Wetter (n) bleibe ich zu Hause.", options: ["schlechtem", "schlechten", "schlechte", "schlechtes"], correct: 0, explanation: "Dat, –±–µ–∑ –∞—Ä—Ç–∏–∫–ª—è -> -em." },
              { id: 80, question: "Viele ______ Leute (Pl).", options: ["nette", "netten", "netter", "nettes"], correct: 0, explanation: "Viele (–∫–∞–∫ –Ω—É–ª–µ–≤–æ–π –∞—Ä—Ç–∏–∫–ª—å) -> nette." }
            ]
          },
          block5: {
            title: "5. –õ–µ–∫—Å–∏–∫–∞ –∏ –°–∏—Ç—É–∞—Ü–∏–∏",
            description: "–ü–∏—Å—å–º–∞, –†–∞–±–æ—Ç–∞, –ñ–∏–ª—å–µ",
            questions: [
              { id: 81, question: "Sehr geehrte ______ und Herren,", options: ["Damen", "Frauen", "Leute", "Menschen"], correct: 0, explanation: "–ö–ª–∏—à–µ." },
              { id: 82, question: "Mit freundlichen ______.", options: ["Gr√º√üen", "Gr√º√üe", "Gru√ü", "Gegr√º√üt"], correct: 0, explanation: "–í—Å–µ–≥–¥–∞ Dativ Plural." },
              { id: 83, question: "Ich schreibe Ihnen, ______.", options: ["weil", "denn", "deshalb", "trotzdem"], correct: 0, explanation: "–ü—Ä–∏—á–∏–Ω–∞." },
              { id: 84, question: "Ich m√∂chte einen Termin ______.", options: ["vereinbaren", "machen", "tun", "sagen"], correct: 0, explanation: "–ö–ª–∏—à–µ." },
              { id: 85, question: "K√∂nnen wir den Termin ______?", options: ["verschieben", "schieben", "bewegen", "wechseln"], correct: 0, explanation: "–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏." },
              { id: 86, question: "Ich muss den Termin ______.", options: ["absagen", "mitsagen", "ausmachen", "anmachen"], correct: 0, explanation: "–û—Ç–º–µ–Ω–∏—Ç—å." },
              { id: 87, question: "Geben Sie mir bitte ______.", options: ["Bescheid", "Antwort", "Information", "Wissen"], correct: 0, explanation: "Bescheid geben." },
              { id: 88, question: "Ich ______ auf Ihre Antwort.", options: ["warte", "erwarte", "hoffe", "freue"], correct: 0, explanation: "Warten auf." },
              { id: 89, question: "Ich ______ mich auf Ihre Antwort.", options: ["freue", "warte", "hoffe", "denke"], correct: 0, explanation: "Sich freuen auf." },
              { id: 90, question: "Die Wohnung ist 50 ______ gro√ü.", options: ["Quadratmeter", "Meter", "Zentimeter", "Kilometer"], correct: 0, explanation: "–ñ–∏–ª–∞—è –ø–ª–æ—â–∞–¥—å." },
              { id: 91, question: "Wie hoch ist die ______?", options: ["Miete", "Geld", "Kosten", "Preis"], correct: 0, explanation: "–ê—Ä–µ–Ω–¥–∞." },
              { id: 92, question: "Die Nebenkosten ______ 100 Euro.", options: ["betragen", "sind", "machen", "kosten"], correct: 0, explanation: "–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ: betragen." },
              { id: 93, question: "Ich bin ______ von Beruf.", options: ["Arzt", "ein Arzt", "der Arzt", "als Arzt"], correct: 0, explanation: "–ë–µ–∑ –∞—Ä—Ç–∏–∫–ª—è." },
              { id: 94, question: "Ich arbeite ______ Verk√§ufer.", options: ["als", "wie", "bei", "f√ºr"], correct: 0, explanation: "Arbeiten als." },
              { id: 95, question: "Ich habe viel ______.", options: ["Erfahrung", "Erlebnis", "Wissen", "Ahnung"], correct: 0, explanation: "–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã." },
              { id: 96, question: "Ich habe ______ (Kopf).", options: ["Kopfschmerzen", "Kopfschmerz", "Kopfweh", "Kopfkrank"], correct: 0, explanation: "Plural." },
              { id: 97, question: "Ich f√ºhle mich ______.", options: ["schlecht", "b√∂se", "falsch", "schlimm"], correct: 0, explanation: "–ü–ª–æ—Ö–æ —Å–µ–±—è —á—É–≤—Å—Ç–≤—É—é." },
              { id: 98, question: "Gute ______!", options: ["Besserung", "Gesundheit", "Heilung", "Wiedersehen"], correct: 0, explanation: "–ü–æ–∂–µ–ª–∞–Ω–∏–µ –±–æ–ª—å–Ω–æ–º—É." },
              { id: 99, question: "Der Termin f√§llt ______.", options: ["aus", "ab", "an", "auf"], correct: 0, explanation: "Ausfallen (–æ—Ç–º–µ–Ω—è–µ—Ç—Å—è)." },
              { id: 100, question: "Vielen Dank im ______.", options: ["Voraus", "Vorne", "Anfang", "Vorher"], correct: 0, explanation: "–ó–∞—Ä–∞–Ω–µ–µ." }
            ]
          }
        };

        // --- –î–ê–ù–ù–´–ï –ü–ò–°–ï–ú (BRIEF) ---
        const briefData = [
            {
                id: "brief1",
                title: "–¢–µ–º–∞: –ë–æ–ª–µ–∑–Ω—å —Ä–µ–±–µ–Ω–∫–∞ (Schule)",
                situation: "–í–∞—à–∞ –¥–æ—á—å –ú–∞—Ä–∏—è –∑–∞–±–æ–ª–µ–ª–∞. –ù–∞–ø–∏—à–∏—Ç–µ —É—á–∏—Ç–µ–ª—é (Frau M√ºller).",
                points: ["Grund: –ü–æ—á–µ–º—É –Ω–µ –≤ —à–∫–æ–ª–µ?", "Dauer: –°–∫–æ–ª—å–∫–æ –¥–Ω–µ–π?", "Hausaufgaben: –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –∑–∞–¥–∞–Ω–∏–µ."],
                template: "Sehr geehrte Frau M√ºller,\n\nmein Name ist... Ich schreibe Ihnen, weil...",
                solution: `Sehr geehrte Frau M√ºller,\n\nmein Name ist [–í–∞—à–µ –ò–º—è] und ich bin der Vater von Maria.\n\nIch schreibe Ihnen, weil Maria krank ist und heute nicht zur Schule kommen kann. Sie hat Fieber, deshalb muss sie drei Tage zu Hause bleiben.\nIch schicke Ihnen sp√§ter das Attest.\n\nK√∂nnten Sie mir bitte die Hausaufgaben f√ºr Maria schicken?\n\nMit freundlichen Gr√º√üen\n\n[–í–∞—à–µ –ò–º—è]`,
                checklist: ["–û–±—Ä–∞—â–µ–Ω–∏–µ: 'Sehr geehrte Frau M√ºller,' (—Å –∑–∞–ø—è—Ç–æ–π!)", "–ü–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ —Å –º–∞–ª–µ–Ω—å–∫–æ–π –±—É–∫–≤—ã?", "–ì–ª–∞–≥–æ–ª –ø–æ—Å–ª–µ 'weil' –≤ –∫–æ–Ω—Ü–µ?", "–ì–ª–∞–≥–æ–ª –ø–æ—Å–ª–µ 'deshalb' –Ω–∞ 2-–º –º–µ—Å—Ç–µ?", "–í–µ–∂–ª–∏–≤–∞—è –ø—Ä–æ—Å—å–±–∞: 'K√∂nnten Sie bitte...'?"]
            },
            {
                id: "brief2",
                title: "–¢–µ–º–∞: –ê—Ä–µ–Ω–¥–∞ (Vermieter)",
                situation: "–û—Ç–æ–ø–ª–µ–Ω–∏–µ —Å–ª–æ–º–∞–ª–æ—Å—å. –ù–∞–ø–∏—à–∏—Ç–µ –∞—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—é.",
                points: ["Problem: –ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å?", "Wie lange: –ö–∞–∫ –¥–∞–≤–Ω–æ?", "L√∂sung: –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –º–∞—Å—Ç–µ—Ä–∞."],
                template: "Sehr geehrte Damen und Herren,\n\nhiermit m√∂chte ich...",
                solution: `Sehr geehrte Damen und Herren,\n\nhiermit schreibe ich Ihnen, weil die Heizung in meiner Wohnung defekt ist.\n\nEs ist sehr kalt in der Wohnung. Die Heizung funktioniert seit drei Tagen nicht.\n\nK√∂nnten Sie bitte einen Handwerker schicken, um die Heizung zu reparieren?\nBitte geben Sie mir Bescheid, wann der Handwerker kommen kann.\n\nMit freundlichen Gr√º√üen\n\n[–í–∞—à–µ –ò–º—è]`,
                checklist: ["–û–±—Ä–∞—â–µ–Ω–∏–µ: 'Damen und Herren,'?", "–°–ª–æ–≤–∞: 'defekt' –∏–ª–∏ 'kaputt'?", "Seit + Dativ (seit drei Tagen)?", "–ü—Ä–æ—Å—å–±–∞: 'einen Handwerker schicken'?"]
            },
            {
                id: "brief3",
                title: "–¢–µ–º–∞: –†–∞–±–æ—Ç–∞ (Bewerbung)",
                situation: "–í—ã –ø–∏—à–µ—Ç–µ —à–µ—Ñ—É (Herr Bergmann) –Ω–∞—Å—á–µ—Ç –≤–∞–∫–∞–Ω—Å–∏–∏ –í–æ–¥–∏—Ç–µ–ª—è.",
                points: [
                    "Grund: –í–∞–∫–∞–Ω—Å–∏—è.",
                    "Person: –û–ø—ã—Ç / –ü—Ä–∞–≤–∞.",
                    "Termin: –°–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ."
                ],
                template: "Sehr geehrter Herr Bergmann,\n\nich habe Ihre Anzeige gelesen...",
                solution: `Sehr geehrter Herr Bergmann,\n\nich habe Ihre Anzeige gelesen und interessiere mich sehr f√ºr die Stelle als Fahrer.\n\nIch habe den F√ºhrerschein Klasse B und viel Erfahrung. Ich fahre Auto, seit ich 18 Jahre alt bin. Ich bin zuverl√§ssig und p√ºnktlich.\n\nK√∂nnten wir bitte einen Termin f√ºr ein Vorstellungsgespr√§ch vereinbaren?\nIch freue mich auf Ihre Antwort.\n\nMit freundlichen Gr√º√üen\n\n[–í–∞—à–µ –ò–º—è]`,
                checklist: [
                    "–û–±—Ä–∞—â–µ–Ω–∏–µ: 'Herr Bergmann' (–º—É–∂—á–∏–Ω–∞ -> geehrtER)?",
                    "–í—ã/–í–∞—à: Sie, Ihnen, Ihre (–≤–µ–∑–¥–µ —Å –ë–æ–ª—å—à–æ–π)?",
                    "–ò–Ω—Ç–µ—Ä–µ—Å: 'interessiere mich f√ºr...'?",
                    "–°–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ: 'Vorstellungsgespr√§ch'?"
                ]
            }
        ];

        // --- –î–ê–ù–ù–´–ï FLASHCARDS (–£–õ–£–ß–®–ï–ù–ù–´–ï) ---
        const initialFlashcards = [
            { id: 1, front: "warten ... (–∂–¥–∞—Ç—å)", back: "AUF + Akkusativ", example: "Ich warte auf den Bus." },
            { id: 2, front: "denken ... (–¥—É–º–∞—Ç—å –æ)", back: "AN + Akkusativ", example: "Ich denke an dich." },
            { id: 3, front: "sich freuen ... (—Ä–∞–¥–æ–≤–∞—Ç—å—Å—è –±—É–¥—É—â–µ–º—É)", back: "AUF + Akkusativ", example: "Ich freue mich auf den Urlaub." },
            { id: 4, front: "sich freuen ... (—Ä–∞–¥–æ–≤–∞—Ç—å—Å—è —Å–≤–µ—Ä—à–∏–≤—à–µ–º—É—Å—è)", back: "√úBER + Akkusativ", example: "Ich freue mich √ºber das Geschenk." },
            { id: 5, front: "sich interessieren ... (–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞—Ç—å—Å—è)", back: "F√úR + Akkusativ", example: "Ich interessiere mich f√ºr Sport." },
            { id: 6, front: "tr√§umen ... (–º–µ—á—Ç–∞—Ç—å –æ)", back: "VON + Dativ", example: "Ich tr√§ume von einem Haus." },
            { id: 7, front: "sprechen ... (–≥–æ–≤–æ—Ä–∏—Ç—å —Å –∫–µ–º-—Ç–æ)", back: "MIT + Dativ", example: "Ich spreche mit dem Chef." },
            { id: 8, front: "zufrieden sein ... (–±—ã—Ç—å –¥–æ–≤–æ–ª—å–Ω—ã–º)", back: "MIT + Dativ", example: "Ich bin mit dem Service zufrieden." },
            { id: 9, front: "Angst haben ... (–±–æ—è—Ç—å—Å—è)", back: "VOR + Dativ", example: "Ich habe Angst vor Hunden." },
            { id: 10, front: "einladen ... (–ø—Ä–∏–≥–ª–∞—à–∞—Ç—å –Ω–∞)", back: "ZU + Dativ", example: "Ich lade dich zum Geburtstag ein." },
            { id: 11, front: "sich k√ºmmern ... (–∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ)", back: "UM + Akkusativ", example: "Ich k√ºmmere mich um die Kinder." },
            { id: 12, front: "teilnehmen ... (—É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤)", back: "AN + Dativ", example: "Ich nehme an dem Kurs teil." }
        ];

        // --- –î–ê–ù–ù–´–ï LESEN (–ß–¢–ï–ù–ò–ï) ---
        const readingData = [
            {
                id: "read1",
                title: "Lesen Teil 1: E-Mail von Lisa",
                text: `Liebe Julia,\n\nwie geht es dir? Mir geht es gut, aber ich habe viel Stress. Ich bin letzte Woche umgezogen. Meine neue Wohnung ist sehr sch√∂n und hell, aber auch teuer. Sie liegt im Stadtzentrum, deshalb ist es manchmal ein bisschen laut.\n\nIch habe noch keine M√∂bel f√ºr das Wohnzimmer. Am Samstag fahre ich zu IKEA. M√∂chtest du mitkommen? Ich kann dich mit meinem Auto abholen.\n\nMelde dich bald!\n\nLiebe Gr√º√üe\nLisa`,
                questions: [
                    { q: "Lisa wohnt jetzt in einer neuen Wohnung.", a: true },
                    { q: "Die Wohnung ist billig und ruhig.", a: false },
                    { q: "Lisa m√∂chte am Samstag M√∂bel kaufen.", a: true },
                    { q: "Julia soll Lisa abholen.", a: false }
                ]
            },
            {
                id: "read2",
                title: "Lesen Teil 3: Anzeige",
                text: `SUCHE NACHHILFE\n\nF√ºr meinen Sohn (12 Jahre, 6. Klasse) suche ich dringend Nachhilfe in Mathematik und Englisch. Zweimal pro Woche (Dienstag und Donnerstag) am Nachmittag. Wir wohnen in Essen-R√ºttenscheid.\n\nIch biete 15 Euro pro Stunde.\n\nBitte melden Sie sich bei Frau Weber: Tel. 0176-1234567`,
                questions: [
                    { q: "Frau Weber sucht einen Lehrer f√ºr Musik.", a: false },
                    { q: "Der Unterricht soll am Vormittag sein.", a: false },
                    { q: "Frau Weber bezahlt 15 Euro f√ºr eine Stunde.", a: true },
                    { q: "Der Sohn ist 12 Jahre alt.", a: true }
                ]
            }
        ];

        // --- –ö–û–ú–ü–û–ù–ï–ù–¢–´ ---

        function ReadingGame({ onExit }) {
            const [answers, setAnswers] = useState({});
            const [showResult, setShowResult] = useState(false);
            const [activeTextId, setActiveTextId] = useState(0);

            const currentText = readingData[activeTextId];

            const handleAnswer = (qIdx, val) => {
                setAnswers(prev => ({ ...prev, [`${activeTextId}-${qIdx}`]: val }));
            };

            const score = currentText.questions.reduce((acc, q, i) => {
                return acc + (answers[`${activeTextId}-${i}`] === q.a ? 1 : 0);
            }, 0);

            return (
                <div className="w-full max-w-4xl animate-fade-in mx-auto">
                    <div className="flex justify-between mb-4">
                        <button onClick={onExit} className="text-slate-500 hover:text-blue-600 flex items-center font-bold"><Icons.Home /> <span className="ml-2">–ú–µ–Ω—é</span></button>
                        <div className="flex gap-2">
                            {readingData.map((_, i) => (
                                <button key={i} onClick={() => {setActiveTextId(i); setShowResult(false); setAnswers({})}} className={`px-3 py-1 rounded-full text-sm font-bold ${activeTextId === i ? 'bg-blue-600 text-white' : 'bg-slate-200 text-slate-500'}`}>–¢–µ–∫—Å—Ç {i+1}</button>
                            ))}
                        </div>
                    </div>

                    <div className="grid md:grid-cols-2 gap-6">
                        {/* –¢–µ–∫—Å—Ç */}
                        <div className="bg-white p-6 rounded-3xl shadow-lg border border-slate-100 h-fit">
                            <h3 className="text-xl font-bold text-slate-800 mb-4 flex items-center"><Icons.Read/> <span className="ml-2">{currentText.title}</span></h3>
                            <div className="bg-yellow-50 p-6 rounded-xl text-slate-700 whitespace-pre-wrap leading-relaxed font-serif text-lg border border-yellow-100 shadow-inner">
                                {currentText.text}
                            </div>
                        </div>

                        {/* –í–æ–ø—Ä–æ—Å—ã */}
                        <div className="space-y-4">
                            {currentText.questions.map((q, i) => {
                                const myAns = answers[`${activeTextId}-${i}`];
                                const isCorrect = showResult && myAns === q.a;
                                const isWrong = showResult && myAns !== q.a;

                                return (
                                    <div key={i} className={`p-4 rounded-2xl border-2 transition-all ${isCorrect ? 'border-green-500 bg-green-50' : isWrong ? 'border-red-500 bg-red-50' : 'border-slate-200 bg-white'}`}>
                                        <p className="font-medium text-slate-800 mb-3">{i+1}. {q.q}</p>
                                        <div className="flex gap-2">
                                            <button 
                                                onClick={() => handleAnswer(i, true)} 
                                                disabled={showResult}
                                                className={`flex-1 py-2 rounded-lg font-bold transition-all ${myAns === true ? 'bg-blue-600 text-white' : 'bg-slate-100 text-slate-500 hover:bg-slate-200'}`}
                                            >
                                                Richtig (–í–µ—Ä–Ω–æ)
                                            </button>
                                            <button 
                                                onClick={() => handleAnswer(i, false)} 
                                                disabled={showResult}
                                                className={`flex-1 py-2 rounded-lg font-bold transition-all ${myAns === false ? 'bg-blue-600 text-white' : 'bg-slate-100 text-slate-500 hover:bg-slate-200'}`}
                                            >
                                                Falsch (–ù–µ–≤–µ—Ä–Ω–æ)
                                            </button>
                                        </div>
                                    </div>
                                )
                            })}
                            
                            {!showResult ? (
                                <button onClick={() => setShowResult(true)} className="w-full py-4 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold shadow-lg transition-all">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç—ã</button>
                            ) : (
                                <div className="text-center p-4 bg-blue-50 rounded-xl font-bold text-blue-800">
                                    –†–µ–∑—É–ª—å—Ç–∞—Ç: {score} –∏–∑ {currentText.questions.length}
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        function FlashcardsGame({ onExit }) {
            const [cards, setCards] = useState(initialFlashcards);
            const [currentIndex, setCurrentIndex] = useState(0);
            const [isFlipped, setIsFlipped] = useState(false);
            const [masteredCount, setMasteredCount] = useState(0);
            const [showCongrats, setShowCongrats] = useState(false);

            const currentCard = cards[currentIndex];

            const handleRate = (known) => {
                setIsFlipped(false);
                setTimeout(() => {
                    if (known) {
                        // –£–±–∏—Ä–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É –∏–∑ –∫–æ–ª–æ–¥—ã
                        const newCards = cards.filter((_, i) => i !== currentIndex);
                        setMasteredCount(m => m + 1);
                        if (newCards.length === 0) {
                            setShowCongrats(true);
                        } else {
                            setCards(newCards);
                            // –ï—Å–ª–∏ —É–¥–∞–ª–∏–ª–∏ –ø–æ—Å–ª–µ–¥–Ω—é—é, –∏–¥–µ–º –≤ –Ω–∞—á–∞–ª–æ
                            if (currentIndex >= newCards.length) setCurrentIndex(0);
                        }
                    } else {
                        // –û—Å—Ç–∞–≤–ª—è–µ–º –∫–∞—Ä—Ç–æ—á–∫—É, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–π
                        setCurrentIndex((currentIndex + 1) % cards.length);
                    }
                }, 200); // –ñ–¥–µ–º –ø–æ–∫–∞ –ø–µ—Ä–µ–≤–µ—Ä–Ω–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ
            };

            if (showCongrats) {
                return (
                    <div className="flex flex-col items-center justify-center h-[60vh] animate-fade-in">
                        <div className="text-6xl mb-4">üéâ</div>
                        <h2 className="text-2xl font-bold text-slate-800 mb-2">–ü–æ–∑–¥—Ä–∞–≤–ª—è—é!</h2>
                        <p className="text-slate-500 mb-6">–í—ã –≤—ã—É—á–∏–ª–∏ –≤—Å–µ —Å–ª–æ–≤–∞!</p>
                        <button onClick={onExit} className="px-6 py-3 bg-blue-600 text-white rounded-xl font-bold">–í –º–µ–Ω—é</button>
                    </div>
                )
            }

            return (
                <div className="w-full max-w-md animate-fade-in flex flex-col items-center mx-auto pt-10">
                    <div className="flex justify-between w-full mb-4 px-2">
                        <button onClick={onExit} className="text-slate-500 hover:text-blue-600 font-bold flex items-center"><Icons.Home/> <span className="ml-2">–ú–µ–Ω—é</span></button>
                        <span className="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-bold">–í—ã—É—á–µ–Ω–æ: {masteredCount}</span>
                        <span className="bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm font-bold">–û—Å—Ç–∞–ª–æ—Å—å: {cards.length}</span>
                    </div>

                    <div className="relative w-full h-80 perspective cursor-pointer group" onClick={() => setIsFlipped(!isFlipped)}>
                        <div className={`relative w-full h-full duration-500 preserve-3d transition-all ${isFlipped ? 'rotate-y-180' : ''}`}>
                            {/* Front */}
                            <div className="absolute w-full h-full backface-hidden bg-white rounded-3xl shadow-xl flex flex-col items-center justify-center p-8 border-b-4 border-slate-200">
                                <div className="text-slate-400 text-xs uppercase tracking-widest font-bold mb-6">–ì–ª–∞–≥–æ–ª</div>
                                <h2 className="text-3xl font-extrabold text-slate-800 text-center">{currentCard.front}</h2>
                                <p className="absolute bottom-6 text-slate-400 text-xs animate-pulse">–ù–∞–∂–º–∏, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –æ—Ç–≤–µ—Ç</p>
                            </div>
                            {/* Back */}
                            <div className="absolute w-full h-full backface-hidden bg-slate-800 text-white rounded-3xl shadow-xl flex flex-col items-center justify-center p-8 rotate-y-180 border-b-4 border-slate-900">
                                <div className="text-slate-400 text-xs uppercase tracking-widest font-bold mb-6">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</div>
                                <h2 className="text-3xl font-extrabold mb-6 text-center text-yellow-400">{currentCard.back}</h2>
                                <div className="bg-white/10 p-4 rounded-xl w-full text-center backdrop-blur-sm">
                                    <p className="italic text-slate-200 text-sm">"{currentCard.example}"</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="mt-8 flex gap-4 w-full">
                        <button onClick={() => handleRate(false)} className="flex-1 py-4 bg-white border-2 border-red-100 text-red-500 rounded-2xl font-bold hover:bg-red-50 hover:border-red-200 transition-all shadow-sm active:scale-95">
                            –ù–µ –∑–Ω–∞—é (–ü–æ–≤—Ç–æ—Ä–∏—Ç—å) üîÑ
                        </button>
                        <button onClick={() => handleRate(true)} className="flex-1 py-4 bg-green-500 text-white rounded-2xl font-bold hover:bg-green-600 transition-all shadow-lg shadow-green-200 active:scale-95">
                            –ó–Ω–∞—é (–£–±—Ä–∞—Ç—å) ‚úÖ
                        </button>
                    </div>
                </div>
            );
        }

        function QuizGame({ blockId, data, onFinish, onExit }) {
            const questions = data.questions;
            const [currentQ, setCurrentQ] = useState(0);
            const [score, setScore] = useState(0);
            const [showResult, setShowResult] = useState(false);
            const [selectedOption, setSelectedOption] = useState(null);
            const [isAnswered, setIsAnswered] = useState(false);

            const handleAnswer = (index) => {
                if (isAnswered) return;
                setSelectedOption(index);
                setIsAnswered(true);
                if (index === questions[currentQ].correct) setScore(score + 1);
            };

            const nextQuestion = () => {
                if (currentQ < questions.length - 1) {
                    setCurrentQ(currentQ + 1);
                    setSelectedOption(null);
                    setIsAnswered(false);
                } else {
                    setShowResult(true);
                }
            };

            if (showResult) {
                return (
                    <div className="bg-white p-8 rounded-3xl shadow-xl max-w-md w-full text-center mx-auto mt-20 animate-fade-in">
                        <div className="text-6xl mb-4">{score >= 15 ? 'üèÜ' : 'üìö'}</div>
                        <h2 className="text-3xl font-bold text-slate-800 mb-2">–ë–ª–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω!</h2>
                        <div className="text-6xl font-extrabold text-blue-600 mb-4">{score} / {questions.length}</div>
                        <button onClick={() => onFinish(score)} className="w-full py-3 bg-slate-800 text-white rounded-xl font-bold hover:bg-slate-900">–í –º–µ–Ω—é</button>
                    </div>
                );
            }

            const question = questions[currentQ];

            return (
                <div className="w-full max-w-2xl mx-auto animate-fade-in">
                    <button onClick={onExit} className="mb-4 flex items-center text-slate-500 hover:text-slate-800 font-bold"><Icons.Home/> <span className="ml-2">–ú–µ–Ω—é</span></button>
                    <div className="bg-white rounded-3xl shadow-xl border border-slate-100 overflow-hidden">
                        <div className="w-full bg-slate-100 h-2"><div className="bg-blue-500 h-2 transition-all" style={{ width: `${((currentQ + 1) / questions.length) * 100}%` }}></div></div>
                        <div className="p-8">
                            <div className="flex justify-between mb-6 text-sm font-bold text-slate-400 uppercase tracking-wider">
                                <span>–í–æ–ø—Ä–æ—Å {currentQ + 1}/{questions.length}</span>
                                <span>–û—á–∫–∏: {score}</span>
                            </div>
                            <h3 className="text-2xl font-bold text-slate-800 mb-8 leading-snug">
                                {question.question.split('______').map((part, i, arr) => (
                                    <span key={i}>{part}{i < arr.length - 1 && <span className="inline-block min-w-[60px] border-b-2 border-slate-300 mx-1 text-blue-600 text-center relative top-1 px-2">{isAnswered ? (question.options[question.correct] === question.options[selectedOption] ? "" : "") : "?"}</span>}</span>
                                ))}
                            </h3>
                            <div className="space-y-3">
                                {question.options.map((opt, index) => {
                                    let style = "bg-slate-50 border-2 border-slate-100 hover:border-blue-300 text-slate-700";
                                    if (isAnswered) {
                                        if (index === question.correct) style = "bg-green-100 border-green-500 text-green-900";
                                        else if (index === selectedOption) style = "bg-red-100 border-red-500 text-red-900";
                                        else style = "opacity-40";
                                    }
                                    return (
                                        <button key={index} onClick={() => handleAnswer(index)} disabled={isAnswered} className={`w-full p-4 rounded-xl text-left font-medium transition-all flex justify-between items-center ${style}`}>
                                            {opt}
                                            {isAnswered && index === question.correct && <Icons.Check/>}
                                            {isAnswered && index === selectedOption && index !== question.correct && <Icons.X/>}
                                        </button>
                                    )
                                })}
                            </div>
                            {isAnswered && (
                                <div className="mt-6 animate-slide-in">
                                    <div className="p-4 rounded-xl bg-blue-50 border border-blue-100 text-slate-800 mb-4">
                                        <span className="font-bold text-blue-600 text-xs uppercase block mb-1">–†–∞–∑–±–æ—Ä:</span>
                                        {question.explanation}
                                    </div>
                                    <button onClick={nextQuestion} className="w-full py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 flex justify-center items-center shadow-lg">–î–∞–ª–µ–µ</button>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        const BriefGame = ({ task, onExit }) => {
            const [userText, setUserText] = useState(task.template);
            const [showSolution, setShowSolution] = useState(false);
            return (
                <div className="w-full max-w-4xl animate-fade-in mx-auto">
                     <button onClick={onExit} className="mb-4 flex items-center text-slate-500 hover:text-blue-600 transition-colors font-bold"><Icons.Home /> <span className="ml-2">–ú–µ–Ω—é</span></button>
                    <div className="grid md:grid-cols-2 gap-6">
                        <div className="space-y-4">
                            <div className="bg-white p-6 rounded-3xl shadow-sm border border-slate-200">
                                <h2 className="text-xl font-bold text-slate-800 mb-4 flex items-center"><Icons.Book/> <span className="ml-2">{task.title}</span></h2>
                                <div className="bg-blue-50 p-4 rounded-xl mb-4"><p className="text-slate-700">{task.situation}</p></div>
                                <ul className="list-disc list-inside text-slate-600 ml-2">{task.points.map((p, i) => <li key={i}>{p}</li>)}</ul>
                            </div>
                            
                        </div>
                        <div className="space-y-4">
                            <div className="bg-white p-4 rounded-3xl shadow-lg border border-slate-200 flex flex-col h-[400px] relative">
                                <textarea className="flex-1 w-full p-4 bg-white focus:bg-slate-50 outline-none resize-none font-mono text-sm leading-relaxed text-slate-700" value={userText} onChange={(e) => setUserText(e.target.value)} placeholder="–ü–∏—à–∏—Ç–µ –∑–¥–µ—Å—å..."></textarea>
                            </div>
                            <button onClick={() => setShowSolution(!showSolution)} className={`w-full py-3 rounded-xl font-bold text-white transition-all flex items-center justify-center shadow-lg ${showSolution ? 'bg-slate-600 hover:bg-slate-700' : 'bg-green-600 hover:bg-green-700'}`}>{showSolution ? '–°–∫—Ä—ã—Ç—å —Ä–µ—à–µ–Ω–∏–µ' : '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ–±—è / –ü–æ–∫–∞–∑–∞—Ç—å –∏–¥–µ–∞–ª'}</button>
                            
                            {showSolution && (
                                <div className="bg-green-50 p-6 rounded-3xl border border-green-200 animate-fade-in relative shadow-inner">
                                    <div className="absolute top-4 right-4 bg-green-200 text-green-800 text-xs font-bold px-2 py-1 rounded">Musterl√∂sung</div>
                                    <h3 className="font-bold text-green-800 mb-2 flex items-center"><Icons.Check className="w-5 h-5 mr-2"/> –ò–¥–µ–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:</h3>
                                    <pre className="whitespace-pre-wrap font-mono text-sm text-slate-700 leading-relaxed">{task.solution}</pre>
                                    
                                    <div className="mt-6 pt-6 border-t border-green-200">
                                        <h3 className="font-bold text-yellow-800 mb-3 flex items-center"><Icons.Alert className="w-5 h-5 mr-2"/> –ü—Ä–æ–≤–µ—Ä—å —Å–µ–±—è:</h3>
                                        <ul className="space-y-2">{task.checklist.map((item, i) => (<li key={i} className="flex items-start text-slate-700 text-sm"><input type="checkbox" className="mt-1 mr-2 w-4 h-4 accent-green-600 cursor-pointer"/><span>{item}</span></li>))}</ul>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // --- –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ ---
        function App() {
            const [view, setView] = useState('menu'); 
            const [activeId, setActiveId] = useState(null);
            const [scores, setScores] = useState({});

            const finish = (id, score) => {
                setScores(p => ({...p, [id]: Math.max(p[id]||0, score)}));
                setView('menu');
            };

            const MenuItem = ({ icon: Icon, title, subtitle, color, onClick, score, total, badge }) => (
                <button onClick={onClick} className="bg-white p-5 rounded-3xl border border-slate-100 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all text-left group relative overflow-hidden w-full">
                    <div className={`absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity ${color}`}>
                        <svg width="80" height="80" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="10"/></svg>
                    </div>
                    <div className="relative z-10 flex flex-col h-full justify-between">
                        <div className="flex items-start justify-between mb-4">
                            <div className={`p-3 rounded-2xl ${color} bg-opacity-10 text-${color.split('-')[1]}-600`}>
                                <Icon />
                            </div>
                            {score !== undefined ? (
                                <span className="bg-green-100 text-green-700 text-xs font-bold px-2 py-1 rounded-full">{score}/{total}</span>
                            ) : badge && (
                                <span className="bg-orange-100 text-orange-700 text-xs font-bold px-2 py-1 rounded-full">{badge}</span>
                            )}
                        </div>
                        <div>
                            <h3 className="font-bold text-lg text-slate-800 group-hover:text-blue-600 leading-tight mb-1">{title}</h3>
                            <p className="text-xs text-slate-400 font-medium uppercase tracking-wider">{subtitle}</p>
                        </div>
                    </div>
                </button>
            );

            // –†–æ—É—Ç–∏–Ω–≥
            if (view === 'quiz') return <div className="min-h-screen p-4"><QuizGame blockId={activeId} data={quizData[activeId]} onFinish={(s) => finish(activeId, s)} onExit={() => setView('menu')} /></div>;
            if (view === 'brief') return <div className="min-h-screen p-4"><BriefGame task={briefData.find(b => b.id === activeId)} onExit={() => setView('menu')} /></div>;
            if (view === 'flash') return <div className="min-h-screen p-4"><FlashcardsGame onExit={() => setView('menu')} /></div>;
            if (view === 'reading') return <div className="min-h-screen p-4"><ReadingGame onExit={() => setView('menu')} /></div>;

            return (
                <div className="min-h-screen p-4 pb-20">
                    <div className="max-w-5xl w-full mx-auto">
                        <div className="bg-slate-900 text-white p-8 rounded-3xl shadow-2xl mb-12 relative overflow-hidden">
                            <div className="relative z-10">
                                <h1 className="text-3xl md:text-5xl font-extrabold mb-2 tracking-tight">DTZ Profi</h1>
                                <p className="text-slate-400 text-lg max-w-lg">–£–ª—å—Ç–∏–º–∞—Ç–∏–≤–Ω—ã–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —ç–∫–∑–∞–º–µ–Ω—É B1. –í—Å–µ 100 –≤–æ–ø—Ä–æ—Å–æ–≤ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã.</p>
                            </div>
                            <div className="absolute right-0 top-0 h-full w-1/2 bg-gradient-to-l from-blue-600 to-transparent opacity-20"></div>
                        </div>

                        <div className="grid gap-10">
                            
                            <section>
                                <h2 className="text-xl font-bold text-slate-800 mb-4 flex items-center"><span className="bg-blue-100 p-2 rounded-lg mr-3 text-blue-600"><Icons.Check/></span> –¢–µ—Å—Ç—ã (100 Fragen)</h2>
                                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4">
                                    {Object.entries(quizData).map(([k, b]) => (
                                        <MenuItem key={k} icon={Icons.Check} title={b.title.split(': ')[1]} subtitle={b.title.split(': ')[0]} color="text-blue-600" onClick={() => {setActiveId(k); setView('quiz')}} score={scores[k]} total={20}/>
                                    ))}
                                </div>
                            </section>

                            <section>
                                <h2 className="text-xl font-bold text-slate-800 mb-4 flex items-center"><span className="bg-orange-100 p-2 rounded-lg mr-3 text-orange-600"><Icons.Brain/></span> –ù–∞–≤—ã–∫–∏ (Skills)</h2>
                                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                    <MenuItem icon={Icons.Read} title="Lesen Verstehen" subtitle="–ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤" color="text-purple-600" onClick={() => setView('reading')} badge="New"/>
                                    <MenuItem icon={Icons.Brain} title="Flashcards Pro" subtitle="–ì–ª–∞–≥–æ–ª—ã + –ü—Ä–µ–¥–ª–æ–≥–∏" color="text-orange-500" onClick={() => setView('flash')} badge="Updated"/>
                                </div>
                            </section>

                            <section>
                                <h2 className="text-xl font-bold text-slate-800 mb-4 flex items-center"><span className="bg-green-100 p-2 rounded-lg mr-3 text-green-600"><Icons.Book/></span> –ü–∏—Å—å–º–æ (Schreiben)</h2>
                                <div className="grid grid-cols-1 sm:grid-cols-3 gap-4">
                                    {briefData.map(b => (
                                        <MenuItem key={b.id} icon={Icons.Book} title={b.title.split(': ')[1]} subtitle={b.title.split(': ')[0]} color="text-green-600" onClick={() => {setActiveId(b.id); setView('brief')}}/>
                                    ))}
                                </div>
                            </section>

                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>